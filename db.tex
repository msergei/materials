\part{Databases}

\chapter{Основные понятия}

\section{Теорема CAP}

Теорема CAP (известная также как теорема Брюера) — эвристическое утверждение о том, что в любой реализации распределённых вычислений возможно обеспечить не более двух из трёх следующих свойств:
\begin{itemize}

\item согласованность данных (англ. consistency) — во всех вычислительных узлах в один момент времени данные не противоречат друг другу;
\item доступность (англ. availability) — любой запрос к распределённой системе завершается корректным откликом, однако без гарантии, что ответы всех узлов системы совпадают;
\item устойчивость к разделению (англ. partition tolerance) — расщепление распределённой системы на несколько изолированных секций не приводит к некорректности отклика от каждой из секций.

\end{itemize}

\section{Чем отличается транзакция от запроса в контексте БД}
Транзакция - это несколько последовательных запросов в БД, если хотя бы одна из них завершается, то вся транзакция отменяется (rolling back).

\section{Модель транзакции в стандарте ANSI/ISO}
\subsection{Что такое ACID}


\chapter{Масштабируемость}

\section{Что такое согласованность данных?}

\section{Алгоритмы разрешения конфликтов при репликации}
\subsection{Quorum}
\subsection{Векторные часы}
\subsection{Часы Лемпорта}

\section{Шардирование}
\section{Оптимистичные блокировки и пессимистичные?}

\section{Реляционная теория}
\subsection{Что такое транзитивная завивсимость?}
\subsection{Нормальные формы?}
\begin{enumerate}
    \item 1ая;
    \item 2ая;
    \item 3ая;
    \item Бойса-Кодда;
    \item 4ая;
    \item Доменная форма;
    \item 5ая;
    \item 6ая;
\end{enumerate}
\subsection{Ограничение целостности базы данных?}

\chapter{PostgreSQL}

\section{Архитектура posgres}
\subsection{Внутренние компоненты}
\subsection{Что такое autovacuum?}
\section{Что такое план запроса?}

\section{Транзакции}

\subsection{Проблемы параллельного доступа}
\subsubsection{lost update}
\subsubsection{dirty read}
\subsubsection{non-repeatable read}
\subsubsection{phantom reads}

\subsection{Уровни изоляции}
Под «уровнем изоляции транзакций» понимается степень обеспечиваемой внутренними механизмами СУБД (то есть не требующей специального программирования) защиты от всех или некоторых видов вышеперечисленных несогласованности данных, возникающих при параллельном выполнении транзакций. Стандарт SQL-92 определяет шкалу из четырёх уровней изоляции: Read uncommitted, Read committed, Repeatable read, Serializable. Первый из них является самым слабым, последний — самым сильным, каждый последующий включает в себя все предыдущие. 

\subsubsection{Read uncommitted}
\subsubsection{Read committed}
\subsubsection{Repeatable read}
\subsubsection{Serializable}
\subsubsection{Snapshot isolation}


\section{Индексы в postgres}
Индекс - это дополнительная структура данных для ускорения запросов.

Индексы нужны для: поиска, сортировки (WHERE), группировки, ограничения целостности.

Отрицательные стороны индексов:
\begin{itemize}
\item Обладает малой селективностью, пример:
База данных с муж и жен полом, когда статистически записей примерно одинаковое количество.
\item Размер, иногда может весить боьлше базы;
\item Индекс расчитывается в момент вставки записи в таблицу, это занимает время, иногда до 80% времени вставки;
\item Индекс может долго работать, если он большой и фрагментированный;
\item Индекс должен быть валиден во время использования.
\end{itemize}

\subsection{Аспекты создания индекса}
\begin{itemize}
\item Создание без остановки базы:
CREATE INDEX CONCURRENTLY a\_ind in table (a);
\item Важен порядок полей, кроме GIN:
SELECT * FROM table


\end{itemize}


\subsection{Типы индексов}
\subsubsection{b-tree}
\subsubsection{hash}
\subsubsection{gin}
\subsubsection{gist}
\subsubsection{sp-gist}
\subsubsection{brin}

\section{Что такое include индексы?}
\section{Как посмотреть индексы для таблицы?}
\section{Всегда ли postgres использует индексы?}

\chapter{Redis}

\section{Есть ли транзакция в Redis?}
\section{Типы данных Redis}
\subsection{Строки (strings)}
Базовый тип данных Redis. Строки в Redis бинарно-безопасны, могут использоваться так же как числа, ограничены размером 512 Мб.
\subsection{Списки (lists)}
Классические списки строк, упорядоченные в порядке вставки, которая возможна как со стороны головы, так и со стороны хвоста списка. Максимальное количество элементов - 232 - 1.
\subsection{Множества (sets)}    
Множества строк в математическом понимании: не упорядочены, поддерживают операции вставки, проверки вхождения элемента, пересечения и разницы множеств. Максимальное количество элементов - 232 - 1.
\subsection{Хеш-таблицы (hashes)}    
Классические хеш-таблицы или ассоциативные массивы. Максимальное количество пар «ключ-значение» - 232 - 1.
\subsection{Упорядоченные множества (sorted sets)}
Упорядоченное множество отличается от обычного тем, что его элементы упорядочены по особому параметру «score».
